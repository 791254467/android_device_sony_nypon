diff --git frameworks/av/services/audioflinger/Android.mk  frameworks/av/services/audioflinger/Android.mk
index 54377f1..96aa9e7 100644
---  frameworks/av/services/audioflinger/Android.mk
+++  frameworks/av/services/audioflinger/Android.mk
@@ -64,6 +64,10 @@ else
     LOCAL_CFLAGS += -DANDROID_SMP=0
 endif
 
+ifeq ($(BOARD_HAVE_PRE_KITKAT_AUDIO_BLOB),true)
+    LOCAL_CFLAGS += -DHAVE_PRE_KITKAT_AUDIO_BLOB
+endif
+
 LOCAL_CFLAGS += -fvisibility=hidden
 
 include $(BUILD_SHARED_LIBRARY)
diff --git frameworks/av/services/audioflinger/AudioFlinger.cpp  frameworks/av/services/audioflinger/AudioFlinger.cpp
index dd47cf6..031fe4a 100644
---  frameworks/av/services/audioflinger/AudioFlinger.cpp
+++  frameworks/av/services/audioflinger/AudioFlinger.cpp
@@ -1454,6 +1454,20 @@ status_t AudioFlinger::setLowRamDevice(bool isLowRamDevice)
 
 // ----------------------------------------------------------------------------
 
+#ifdef HAVE_PRE_KITKAT_AUDIO_BLOB
+audio_io_handle_t AudioFlinger::openOutput(audio_module_handle_t module,
+                                           audio_devices_t *pDevices,
+                                           uint32_t *pSamplingRate,
+                                           audio_format_t *pFormat,
+                                           audio_channel_mask_t *pChannelMask,
+                                           uint32_t *pLatencyMs,
+                                           audio_output_flags_t flags)
+{
+    return openOutput(module, pDevices, pSamplingRate, pFormat, pChannelMask,
+            pLatencyMs, flags, NULL);
+}
+#endif
+
 audio_io_handle_t AudioFlinger::openOutput(audio_module_handle_t module,
                                            audio_devices_t *pDevices,
                                            uint32_t *pSamplingRate,
@@ -1468,9 +1482,11 @@ audio_io_handle_t AudioFlinger::openOutput(audio_module_handle_t module,
     config.sample_rate = (pSamplingRate != NULL) ? *pSamplingRate : 0;
     config.channel_mask = (pChannelMask != NULL) ? *pChannelMask : 0;
     config.format = (pFormat != NULL) ? *pFormat : AUDIO_FORMAT_DEFAULT;
+#ifndef HAVE_PRE_KITKAT_AUDIO_BLOB
     if (offloadInfo) {
         config.offload_info = *offloadInfo;
     }
+#endif
 
     audio_stream_out_t *outStream = NULL;
     AudioHwDevice *outHwDev;
@@ -1482,8 +1498,10 @@ audio_io_handle_t AudioFlinger::openOutput(audio_module_handle_t module,
               config.format,
               config.channel_mask,
               flags);
+#ifndef HAVE_PRE_KITKAT_AUDIO_BLOB
     ALOGV("openOutput(), offloadInfo %p version 0x%04x",
           offloadInfo, offloadInfo == NULL ? -1 : offloadInfo->version );
+#endif
 
     if (pDevices == NULL || *pDevices == 0) {
         return 0;
diff --git frameworks/av/services/audioflinger/AudioFlinger.h  frameworks/av/services/audioflinger/AudioFlinger.h
index 2aeb263..b498d68 100644
---  frameworks/av/services/audioflinger/AudioFlinger.h
+++  frameworks/av/services/audioflinger/AudioFlinger.h
@@ -155,6 +155,16 @@ public:
     virtual     size_t      getInputBufferSize(uint32_t sampleRate, audio_format_t format,
                                                audio_channel_mask_t channelMask) const;
 
+#ifdef HAVE_PRE_KITKAT_AUDIO_BLOB
+    virtual audio_io_handle_t openOutput(audio_module_handle_t module,
+                                         audio_devices_t *pDevices,
+                                         uint32_t *pSamplingRate,
+                                         audio_format_t *pFormat,
+                                         audio_channel_mask_t *pChannelMask,
+                                         uint32_t *pLatencyMs,
+                                         audio_output_flags_t flags);
+#endif
+
     virtual audio_io_handle_t openOutput(audio_module_handle_t module,
                                          audio_devices_t *pDevices,
                                          uint32_t *pSamplingRate,
diff --git frameworks/av/services/audioflinger/AudioPolicyService.cpp  frameworks/av/services/audioflinger/AudioPolicyService.cpp
index 7f40812..ffd96c6 100644
---  frameworks/av/services/audioflinger/AudioPolicyService.cpp
+++  frameworks/av/services/audioflinger/AudioPolicyService.cpp
@@ -1148,6 +1148,12 @@ int AudioPolicyService::setVoiceVolume(float volume, int delayMs)
     return (int)mAudioCommandThread->voiceVolumeCommand(volume, delayMs);
 }
 
+#ifdef HAVE_PRE_KITKAT_AUDIO_BLOB
+bool AudioPolicyService::isOffloadSupported(const audio_offload_info_t& info)
+{
+    return false;
+}
+#else
 bool AudioPolicyService::isOffloadSupported(const audio_offload_info_t& info)
 {
     if (mpAudioPolicy == NULL) {
@@ -1162,6 +1168,7 @@ bool AudioPolicyService::isOffloadSupported(const audio_offload_info_t& info)
 
     return mpAudioPolicy->is_offload_supported(mpAudioPolicy, &info);
 }
+#endif
 
 // ----------------------------------------------------------------------------
 // Audio pre-processing configuration
-- 
1.7.9.5
